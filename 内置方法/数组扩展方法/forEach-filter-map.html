<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <div id="data" style="display: none;">
    [{"id":
    "1","course":"前端开发之企业级深度JavaScript特训课【JS++前端】","classes":"19","teacher":"小野","img":"ecmascript.jpg","is_free":"1","datetime":"1540454477","price":"0"},
    {"id": "2","course":"WEB前端工程师就业班之深度JS
    DOM+讲师辅导-第3期【JS++前端】","classes":"22","teacher":"小野","img":"dom.jpg","is_free":"0","datetime":"1540454477","price":"699"},
    {"id":
    "3","course":"前端开发之企业级深度HTML特训课【JS++前端】","classes":"3","teacher":"小野","img":"html.jpg","is_free":"1","datetime":"1540454477","price":"0"},
    {"id":
    "4","course":"前端开发之企业级深度CSS特训课【JS++前端】","classes":"5","teacher":"小野","img":"css.jpg","is_free":"1","datetime":"1540454477","price":"0"},
    {"id":
    "5","course":"前端就业班VueJS+去哪儿网+源码课+讲师辅导-第3期【JS++前端】","classes":"50","teacher":"哈默","img":"vuejs.jpg","is_free":"0","datetime":"1540454477","price":"1280"},
    {"id":
    "6","course":"前端就业班ReactJS+新闻头条实战+讲师辅导-第3期【JS++前端】","classes":"21","teacher":"托尼","img":"reactjs.jpg","is_free":"0","datetime":"1540454477","price":"2180"},
    {"id":
    "7","course":"WEB前端开发工程师就业班-直播/录播+就业辅导-第3期【JS++前端】","classes":"700","teacher":"JS++名师团","img":"jiuyeban.jpg","is_free":"0","datetime":"1540454477","price":"4980"}]
  </div>
  <script>
    var data = JSON.parse(document.getElementById('data').innerText);
    // Array.prototype.myForEach = function (fn) {
    //   var arr = this,
    //     len = arr.length,
    //     arg2 = arguments[1] || window;

    //   for (var i = 0; i < len; i++) {
    //     fn.apply(arg2, [arr[i], i, arr]);
    //   }
    // }


    // var arr = [{ a: 1, c: 1 }, { b: 2 }, { c: 3 }];

    // // 普通循环
    // // for (var i = 0; i < arr.length; i++) {
    // //   console.log(arr[i], i, arr);
    // // }

    // // 每一项、下标、整个数组
    // arr.myForEach(function (elem, index, array) {
    //   console.log(this, elem);
    // }, '1');

    // Array.prototype.myFilter = function (fn) {
    //   var arr = this,
    //     len = arr.length,
    //     arg2 = arguments[1] || window,
    //     nArr = [],
    //     item;

    //   for (var i = 0; i < len; i++) {
    //     // 深拷贝，防止修改的时候影响到原数组
    //     item = deepClone(arr[i]);
    //     fn.apply(arg2, [arr[i], i, arr]) ? nArr.push(item) : '';
    //   }
    //   return nArr;
    // }

    // var newArr = data.myFilter(function (elem, index, array) {
    //   return elem.is_free === '1';
    //   console.log(this);
    // })




    // console.log(newArr);

    Array.prototype.myMap = function (fn) {
      var arr = this,
        len = arr.length,
        arg2 = arguments[1] || window,
        nArr = [],
        item;

      for (var i = 0; i < len; i++) {
        // 深拷贝，防止修改的时候影响到原数组
        item = deepClone(arr[i]);
        nArr.push(fn.apply(arg2, [item, i, arr]))
      }
      return nArr;
    }

    var newArr = data.myMap(function (elem, index, array) {
      // 操作数组会修改原数组，因为两个是同一引用
      elem.course = this.name + elem.course;
      return elem;
    }, { name: "title" });

  </script>
</body>

</html>